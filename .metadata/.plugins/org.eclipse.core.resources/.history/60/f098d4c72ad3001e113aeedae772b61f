#include"timer0.h"
#include "adc.h"
#include "lm35.h"
#include "lcd.h"
#include "motor.h"

const ADC_ConfigType * g_Config_Ptr=NULL;

int main(void)
{
	uint8 temp;
	ADC_ConfigType ADC_attributes={ADC_INTERNAL_2560mv,ADC_F_CPUOVER_8};
	g_Config_Ptr =&ADC_attributes;
	TIMER0_init();
	ADC_init(g_Config_Ptr);
	DcMotor_Init();

	while(1)
	{
		temp=LM35_getTemp();

		if(temp<30)
		{
			LCD_displayStringRowColumn(1, 3, "FAN is OFF");
			LCD_displayStringRowColumn(2, 3, "Temp = ");
			LCD_intgerToString(temp);
			LCD_displayString(" c");
			DcMotor_Rotate(DCMOTOR_STOP, 0);
		}

		else if(temp<60)
		{
			LCD_displayStringRowColumn(1, 3, "FAN is ON");
			LCD_displayStringRowColumn(2, 3, "Temp = ");
			LCD_intgerToString(temp);
			LCD_displayString(" c");
			DcMotor_Rotate(DCMOTOR_STOP, 25);
		}
		else if (temp<90)
		{
			LCD_displayStringRowColumn(1, 3, "FAN is ON");
			LCD_displayStringRowColumn(2, 3, "Temp = ");
			LCD_intgerToString(temp);
			LCD_displayString(" c");
			DcMotor_Rotate(DCMOTOR_STOP, 50);

		}
		else if(temp<120)
		{
			LCD_displayStringRowColumn(1, 3, "FAN is ON");
			LCD_displayStringRowColumn(2, 3, "Temp = ");
			LCD_intgerToString(temp);
			LCD_displayString(" c");
			DcMotor_Rotate(DCMOTOR_STOP, 75);
		}
		else
		{
			LCD_displayStringRowColumn(1, 3, "FAN is ON");
			LCD_displayStringRowColumn(2, 3, "Temp = ");
			LCD_intgerToString(temp);
			LCD_displayString(" c");
			DcMotor_Rotate(DCMOTOR_STOP, 100);
		}


	}



}

